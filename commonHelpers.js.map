{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from \"axios\";\n\nexport async function getImages(request, page = 1, per_page = 15) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const params = new URLSearchParams({\n        key: '44531461-2364a69dbdf6d0d630a4dab14',\n        q: request,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: per_page,\n    });\n\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n    console.log(url);\n\n    try {\n        const res = await axios.get(url);\n        return res.data; // повернути дані\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw new Error(`HTTP error! Status: ${error.response.status}`);\n    }\n}\n","'use strict';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.image-gallery');\n\nexport function renderImages(images) {\n    if (!images || !images.length) {\n        console.error('No images to render');\n        return;\n    }\n\n    const markup = images.map((image) => {\n        return `\n        <li class=\"images-list-item\">\n            <a class=\"img-link\" href=\"${image.largeImageURL}\">\n                <img class=\"img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <ul class=\"img-dscr\">\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Likes</p>\n                    <p class=\"img-data-numbers\">${image.likes}</p>\n                </li>\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Views</p>\n                    <p class=\"img-data-numbers\">${image.views}</p>\n                </li>\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Comments</p>\n                    <p class=\"img-data-numbers\">${image.comments}</p>\n                </li>\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Downloads</p>\n                    <p class=\"img-data-numbers\">${image.downloads}</p>\n                </li>\n            </ul>\n        </li>`;\n    }).join('');\n\n    gallery.innerHTML += markup; // Додаємо нові зображення до існуючих\n\n    const lightbox = new SimpleLightbox('.image-gallery a', {\n        captions: true,\n        captionSelector: 'img',\n        captionType: 'attr',\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        captionDelay: 250,\n        animationSpeed: 300,\n        widthRatio: 1,\n        heightRatio: 0.95,\n        disableRightClick: true,\n    });\n    lightbox.refresh();\n}\n","'use strict';\n\nimport { getImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.image-search-form');\nconst searchInput = document.querySelector('.image-search-input');\nconst gallery = document.querySelector('.image-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-button');\nconst loadMoreLoader = document.querySelector('.new-loader'); // Змінено селектор на .new-loader\n\nloader.style.display = 'none'; \nloadMoreBtn.style.display = 'none'; // Приховати кнопку при завантаженні сторінки\nloadMoreLoader.style.display = 'none'; // Приховати лоадер \"Load more\" при завантаженні сторінки\n\nlet request;\nlet page = 1;\nconst per_page = 15;\nlet cardHeight = 0;\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    request = searchInput.value.trim(); \n\n    clearGallery();\n\n    if (!request) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term',\n            position: 'topRight',\n            titleColor: '#fff',\n            titleSize: '16px',\n            backgroundColor: 'red',\n            messageColor: 'white',\n        });\n        return;\n    }\n\n    page = 1; // Скидання сторінки до початкового значення\n    loadMoreBtn.style.display = 'none'; // Приховати кнопку перед новим пошуком\n\n    fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n    page += 1;\n    loadMoreLoader.style.display = 'block'; // Показати лоадер \"Load more\" при кліку на кнопку\n    fetchImages();\n});\n\nfunction fetchImages() {\n    loader.style.display = 'block';\n    loadMoreLoader.style.display = 'none'; // Приховати лоадер \"Load more\" під час завантаження зображень\n\n    getImages(request, page, per_page)\n    .then(data => {\n        loader.style.display = 'none'; \n        if (data.hits.length === 0 && page === 1) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                titleColor: '#fff',\n                titleSize: '16px',\n                backgroundColor: 'blue',\n                messageColor: 'white',\n            });\n        } else {\n            renderImages(data.hits);\n\n            // Отримання висоти однієї карточки галереї\n            if (data.hits.length > 0) {\n                const firstCard = gallery.querySelector('.images-list-item');\n                if (firstCard) {\n                    cardHeight = firstCard.getBoundingClientRect().height;\n                }\n            }\n\n            const totalHits = data.totalHits;\n            const totalPages = Math.ceil(totalHits / per_page);\n\n            if (data.hits.length > 0) {\n                loadMoreBtn.style.display = 'block'; // Показати кнопку, якщо є зображення\n            } else {\n                loadMoreBtn.style.display = 'none'; // Приховати кнопку, якщо зображення закінчилися\n            }\n            \n            // Прокручування сторінки на висоту карточки галереї\n            if (cardHeight > 0) {\n                window.scrollBy({\n                    top: cardHeight * 2, // Прокрутка на дві висоти карточки\n                    behavior: 'smooth' // Плавна анімація прокрутки\n                });\n            }\n\n            if (page > totalPages) {\n                return iziToast.error({\n                    position: \"topRight\",\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    titleColor: '#fff',\n                    titleSize: '16px',\n                    backgroundColor: 'red',\n                    messageColor: 'white',\n                });\n            }\n        }\n        \n    })\n    .catch(error => {\n        console.error(error);\n        loader.style.display = 'none';\n        loadMoreLoader.style.display = 'none'; // Приховати лоадер \"Load more\" в разі помилки\n    });\n}\n\nfunction clearGallery() {\n    gallery.innerHTML = '';\n}\n"],"names":["getImages","request","page","per_page","BASE_URL","END_POINT","params","url","axios","error","gallery","renderImages","images","markup","image","SimpleLightbox","form","searchInput","loader","loadMoreBtn","loadMoreLoader","cardHeight","event","clearGallery","iziToast","fetchImages","data","firstCard","totalHits","totalPages"],"mappings":"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"}