{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from \"axios\";\n\nexport async function getImages(request, page = 1, per_page = 15) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const params = new URLSearchParams({\n        key: '44531461-2364a69dbdf6d0d630a4dab14',\n        q: request,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: per_page,\n    });\n\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n    console.log(url);\n\n    try {\n        const res = await axios.get(url);\n        return res.data; \n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw new Error(`HTTP error! Status: ${error.response.status}`);\n    }\n}\n","'use strict';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.image-gallery');\n\nexport function renderImages(images) {\n    if (!images || !images.length) {\n        console.error('No images to render');\n        return;\n    }\n\n    const markup = images.map((image) => {\n        return `\n        <li class=\"images-list-item\">\n            <a class=\"img-link\" href=\"${image.largeImageURL}\">\n                <img class=\"img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <ul class=\"img-dscr\">\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Likes</p>\n                    <p class=\"img-data-numbers\">${image.likes}</p>\n                </li>\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Views</p>\n                    <p class=\"img-data-numbers\">${image.views}</p>\n                </li>\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Comments</p>\n                    <p class=\"img-data-numbers\">${image.comments}</p>\n                </li>\n                <li class=\"img-data\">\n                    <p class=\"img-data-title\">Downloads</p>\n                    <p class=\"img-data-numbers\">${image.downloads}</p>\n                </li>\n            </ul>\n        </li>`;\n    }).join('');\n\n    gallery.innerHTML += markup; \n\n    const lightbox = new SimpleLightbox('.image-gallery a', {\n        captions: true,\n        captionSelector: 'img',\n        captionType: 'attr',\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        captionDelay: 250,\n        animationSpeed: 300,\n        widthRatio: 1,\n        heightRatio: 0.95,\n        disableRightClick: true,\n    });\n    lightbox.refresh();\n}\n","'use strict';\n\nimport { getImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.image-search-form');\nconst searchInput = document.querySelector('.image-search-input');\nconst gallery = document.querySelector('.image-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-button');\n\n\nloadMoreBtn.style.display = 'none'; \n\nlet request;\nlet page = 1;\nconst per_page = 15;\nlet cardHeight = 0;\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    request = searchInput.value.trim(); \n\n    clearGallery();\n\n    if (!request) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term',\n            position: 'topRight',\n            titleColor: '#fff',\n            titleSize: '16px',\n            backgroundColor: 'red',\n            messageColor: 'white',\n        });\n        loadMoreBtn.style.display = 'none';\n        return;\n    }\n\n    page = 1; \n    loadMoreBtn.style.display = 'none'; \n\n    fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n    page += 1;\n    showLoader();\n    fetchImages();\n});\n\nfunction fetchImages() {\n    getImages(request, page, per_page)\n    .then(data => {\n        hideLoader(); \n        if (data.hits.length === 0 && page === 1) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                titleColor: '#fff',\n                titleSize: '16px',\n                backgroundColor: 'blue',\n                messageColor: 'white',\n            });\n            loadMoreBtn.style.display = 'none';\n        } else {\n            renderImages(data.hits);\n\n            if (data.hits.length > 0) {\n                const firstCard = gallery.querySelector('.images-list-item');\n                if (firstCard) {\n                    cardHeight = firstCard.getBoundingClientRect().height;\n                }\n            }\n\n            const totalHits = data.totalHits;\n            const totalPages = Math.ceil(totalHits / per_page);\n\n            if (data.hits.length > 0) {\n                loadMoreBtn.style.display = 'block'; \n            } else {\n                loadMoreBtn.style.display = 'none'; \n            }\n            \n            \n            if (cardHeight > 0) {\n                window.scrollBy({\n                    top: cardHeight * 2, \n                    behavior: 'smooth' \n                });\n            }\n\n            if (page > totalPages) {\n                return iziToast.error({\n                    position: \"topRight\",\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    titleColor: '#fff',\n                    titleSize: '16px',\n                    backgroundColor: 'red',\n                    messageColor: 'white',\n                });\n            }\n        }\n        \n    })\n    .catch(error => {\n        console.error(error);\n        hideLoader(); \n        iziToast.error({\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n            titleColor: '#fff',\n            titleSize: '16px',\n            backgroundColor: 'red',\n            messageColor: 'white',\n        });\n    });\n}\n\nfunction clearGallery() {\n    gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}"],"names":["getImages","request","page","per_page","BASE_URL","END_POINT","params","url","axios","error","gallery","renderImages","images","markup","image","SimpleLightbox","form","searchInput","loader","loadMoreBtn","cardHeight","event","clearGallery","iziToast","fetchImages","showLoader","data","hideLoader","firstCard","totalHits","totalPages"],"mappings":"owBAGO,eAAeA,EAAUC,EAASC,EAAO,EAAGC,EAAW,GAAI,CAC9D,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CAClB,CAAK,EAEKI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAIC,CAAM,GAC7C,QAAQ,IAAIC,CAAG,EAEf,GAAI,CAEA,OADY,MAAMC,EAAM,IAAID,CAAG,GACpB,IACd,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,uBAAuBA,EAAM,SAAS,MAAM,EAAE,CACjE,CACL,CCtBA,MAAMC,EAAU,SAAS,cAAc,gBAAgB,EAEhD,SAASC,EAAaC,EAAQ,CACjC,GAAI,CAACA,GAAU,CAACA,EAAO,OAAQ,CAC3B,QAAQ,MAAM,qBAAqB,EACnC,MACH,CAED,MAAMC,EAASD,EAAO,IAAKE,GAChB;AAAA;AAAA,wCAEyBA,EAAM,aAAa;AAAA,wCACnBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kDAK5BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,kDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,cAI5D,EAAE,KAAK,EAAE,EAEVJ,EAAQ,WAAaG,EAEJ,IAAIE,EAAe,mBAAoB,CACpD,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,eAAgB,IAChB,WAAY,EACZ,YAAa,IACb,kBAAmB,EAC3B,CAAK,EACQ,QAAO,CACpB,CC/CA,MAAMC,EAAO,SAAS,cAAc,oBAAoB,EAClDC,EAAc,SAAS,cAAc,qBAAqB,EAC1DP,EAAU,SAAS,cAAc,gBAAgB,EACjDQ,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,mBAAmB,EAG9DA,EAAY,MAAM,QAAU,OAE5B,IAAIlB,EACAC,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIiB,EAAa,EAEjBJ,EAAK,iBAAiB,SAAWK,GAAU,CAMvC,GALAA,EAAM,eAAc,EACpBpB,EAAUgB,EAAY,MAAM,OAE5BK,IAEI,CAACrB,EAAS,CACVsB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACT,SAAU,WACV,WAAY,OACZ,UAAW,OACX,gBAAiB,MACjB,aAAc,OAC1B,CAAS,EACDJ,EAAY,MAAM,QAAU,OAC5B,MACH,CAEDjB,EAAO,EACPiB,EAAY,MAAM,QAAU,OAE5BK,GACJ,CAAC,EAEDL,EAAY,iBAAiB,QAAS,IAAM,CACxCjB,GAAQ,EACRuB,IACAD,GACJ,CAAC,EAED,SAASA,GAAc,CACnBxB,EAAUC,EAASC,EAAMC,CAAQ,EAChC,KAAKuB,GAAQ,CAEV,GADAC,IACID,EAAK,KAAK,SAAW,GAAKxB,IAAS,EACnCqB,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,WAAY,OACZ,UAAW,OACX,gBAAiB,OACjB,aAAc,OAC9B,CAAa,EACDJ,EAAY,MAAM,QAAU,WACzB,CAGH,GAFAR,EAAae,EAAK,IAAI,EAElBA,EAAK,KAAK,OAAS,EAAG,CACtB,MAAME,EAAYlB,EAAQ,cAAc,mBAAmB,EACvDkB,IACAR,EAAaQ,EAAU,sBAAuB,EAAC,OAEtD,CAED,MAAMC,EAAYH,EAAK,UACjBI,EAAa,KAAK,KAAKD,EAAY1B,CAAQ,EAgBjD,GAdIuB,EAAK,KAAK,OAAS,EACnBP,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,OAI5BC,EAAa,GACb,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAC9B,CAAiB,EAGDlB,EAAO4B,EACP,OAAOP,EAAS,MAAM,CAClB,SAAU,WACV,QAAS,6DACT,WAAY,OACZ,UAAW,OACX,gBAAiB,MACjB,aAAc,OAClC,CAAiB,CAER,CAET,CAAK,EACA,MAAMd,GAAS,CACZ,QAAQ,MAAMA,CAAK,EACnBkB,IACAJ,EAAS,MAAM,CACX,QAAS,mEACT,SAAU,WACV,WAAY,OACZ,UAAW,OACX,gBAAiB,MACjB,aAAc,OAC1B,CAAS,CACT,CAAK,CACL,CAEA,SAASD,GAAe,CACpBZ,EAAQ,UAAY,EACxB,CAEA,SAASe,GAAa,CAClBP,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASS,GAAa,CAClBT,EAAO,MAAM,QAAU,MAC3B"}